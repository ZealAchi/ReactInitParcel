import { __extends } from "tslib";
import * as React from 'react';
import { PureComponent } from 'react';
import PanelHeader from '../common/PanelHeader';
import QuarterPanelBody from './QuarterPanelBody';
import YearPanel from '../year/YearPanel';
import { goYears } from '../utils';
var QuarterPanel = (function (_super) {
    __extends(QuarterPanel, _super);
    function QuarterPanel() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = {
            showYear: false,
        };
        _this.prevYear = function () {
            var _a = _this.props, actived = _a.actived, onChange = _a.onChange;
            var prev = goYears(actived, -1);
            onChange(prev);
        };
        _this.nextYear = function () {
            var _a = _this.props, actived = _a.actived, onChange = _a.onChange;
            var next = goYears(actived, 1);
            onChange(next);
        };
        _this.showYearPanel = function () {
            _this.setState({
                showYear: true,
            });
        };
        _this.onSelectYear = function (val, close) {
            if (close === void 0) { close = false; }
            var _a = _this.props, actived = _a.actived, onChange = _a.onChange;
            var acp = new Date(actived);
            acp.setFullYear(val);
            onChange(acp);
            _this.setState({
                showYear: close,
            });
        };
        return _this;
    }
    QuarterPanel.prototype.render = function () {
        var _a = this, _b = _a.props, actived = _b.actived, disabledDate = _b.disabledDate, i18n = _b.i18n, onSelect = _b.onSelect, selected = _b.selected, showYear = _a.state.showYear;
        var title = "" + actived.getFullYear();
        var yearPanel;
        if (showYear) {
            yearPanel = (React.createElement(YearPanel, { actived: actived, selected: selected, onChange: this.onSelectYear, onSelect: this.onSelectYear }));
        }
        return (React.createElement("div", { className: "quarter-panel", "data-zv": '7.4.3' },
            React.createElement(PanelHeader, { title: title, onClickTitle: this.showYearPanel, prev: this.prevYear, next: this.nextYear }),
            React.createElement(QuarterPanelBody, { actived: actived, selected: selected, disabledDate: disabledDate, onSelect: onSelect, i18n: i18n }),
            showYear && yearPanel));
    };
    return QuarterPanel;
}(PureComponent));
export default QuarterPanel;
