import { __extends } from "tslib";
import * as React from 'react';
import { PureComponent } from 'react';
import PanelHeader from '../common/PanelHeader';
import MonthPanelBody from './MonthPanelBody';
import YearPanel from '../year/YearPanel';
import { goYears, monthStart } from '../utils';
var MonthPanel = (function (_super) {
    __extends(MonthPanel, _super);
    function MonthPanel() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = {
            showYear: false,
        };
        _this.prevYear = function () {
            var _a = _this.props, actived = _a.actived, onChange = _a.onChange;
            var prev = goYears(actived, -1);
            onChange(prev, true);
        };
        _this.nextYear = function () {
            var _a = _this.props, actived = _a.actived, onChange = _a.onChange;
            var next = goYears(actived, 1);
            onChange(next, true);
        };
        _this.showYearPanel = function () {
            _this.setState({
                showYear: true,
            });
        };
        _this.onSelectYear = function (val, close) {
            if (close === void 0) { close = false; }
            var _a = _this.props, actived = _a.actived, onChange = _a.onChange;
            var acp = new Date(actived);
            acp.setFullYear(val);
            onChange(acp, true);
            _this.setState({
                showYear: close,
            });
        };
        _this.onSelectMonth = function (val) {
            var _a = _this.props, actived = _a.actived, onSelect = _a.onSelect;
            var acp = monthStart(actived);
            acp.setMonth(val);
            onSelect(acp);
        };
        return _this;
    }
    MonthPanel.prototype.render = function () {
        var _a = this, _b = _a.props, actived = _b.actived, disabledDate = _b.disabledDate, i18n = _b.i18n, selected = _b.selected, showYear = _a.state.showYear;
        var title = "" + actived.getFullYear();
        var yearPanel;
        if (showYear) {
            yearPanel = (React.createElement(YearPanel, { actived: actived, selected: selected, onChange: this.onSelectYear, onSelect: this.onSelectYear, i18n: i18n }));
        }
        return (React.createElement("div", { className: "month-panel", "data-zv": '7.4.3' },
            React.createElement(PanelHeader, { title: title, onClickTitle: this.showYearPanel, prev: this.prevYear, next: this.nextYear }),
            React.createElement(MonthPanelBody, { actived: actived, selected: selected, disabledDate: disabledDate, onSelect: this.onSelectMonth, i18n: i18n, year: actived.getFullYear() }),
            showYear && yearPanel));
    };
    return MonthPanel;
}(PureComponent));
export default MonthPanel;
