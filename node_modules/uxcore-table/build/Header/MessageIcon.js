'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _uxcoreIcon = require('uxcore-icon');

var _uxcoreIcon2 = _interopRequireDefault(_uxcoreIcon);

var _uxcoreTooltip = require('uxcore-tooltip');

var _uxcoreTooltip2 = _interopRequireDefault(_uxcoreTooltip);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var getMessage = function getMessage(message) {
  if (!message || typeof message !== 'string') return null;
  var lines = message.split(/[\n\r\t]+/gi).filter(function (line) {
    return (/[\/\-\w\u4e00-\u9fa5]+/gi.test(line)
    );
  });
  return _react2["default"].createElement(
    'div',
    { style: {
        textAlign: lines.length > 1 ? 'left' : 'center'
      } },
    lines.map(function (line, index) {
      return line ? _react2["default"].createElement(
        'p',
        { key: 'message_' + index },
        line
      ) : null;
    })
  );
};
var MessageIcon = function MessageIcon(props) {
  if (!props.message) {
    return _react2["default"].createElement('noscript', null);
  }
  var placement = props.tooltipPlacement ? props.tooltipPlacement : props.isStickyHeader ? 'bottom' : 'top';
  return _react2["default"].createElement(
    _uxcoreTooltip2["default"],
    {
      overlay: _react2["default"].createElement(
        'div',
        { className: 'kuma-uxtable-column-message' },
        getMessage(props.message)
      ),
      placement: placement
    },
    _react2["default"].createElement(_uxcoreIcon2["default"], { usei: true, name: 'xinxitishicopy', className: props.prefixCls + '-icon' })
  );
};

MessageIcon.propTypes = {
  message: _propTypes2["default"].string,
  prefixCls: _propTypes2["default"].string
};

MessageIcon.defaultProps = {
  message: '',
  prefixCls: undefined
};

exports["default"] = MessageIcon;
module.exports = exports['default'];