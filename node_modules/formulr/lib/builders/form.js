import { __extends } from "tslib";
import { BasicBuilder } from './basic';
import { FormModel } from '../models';
import { Some, or } from '../maybe';
var FormBuilder = /** @class */ (function (_super) {
    __extends(FormBuilder, _super);
    function FormBuilder(_childBuilders) {
        var _this = _super.call(this) || this;
        _this._childBuilders = _childBuilders;
        return _this;
    }
    FormBuilder.prototype.build = function (defaultValues) {
        var defaults = or(defaultValues, {});
        var children = {};
        var childKeys = Object.keys(this._childBuilders);
        for (var i = 0; i < childKeys.length; i += 1) {
            var key = childKeys[i];
            var childBuilder = this._childBuilders[key];
            if (key in defaults) {
                children[key] = childBuilder.build(Some(defaults[key]));
            }
            else {
                children[key] = childBuilder.build(null);
            }
        }
        var model = new FormModel(children);
        model.validators = this._validators;
        return model;
    };
    return FormBuilder;
}(BasicBuilder));
export { FormBuilder };
